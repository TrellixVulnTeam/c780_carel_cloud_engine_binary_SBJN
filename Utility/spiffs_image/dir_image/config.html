<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body onload="ShowHideDiv();sta_dhcp()">
  <div class="imgcontainer">
    <img src="fav.ico" alt="Avatar" class="avatar">
  </div>
  
    <!-- BANNER -->
<!--    <div style="background: red;width: 100%;">
      <img src="home_banner.jpg" alt="Home Banner" >
    </div>
-->

  <h1 class="imgcontainer">Welcome to CAREL!</h1>
    
  <div class="container">
    <div>
      <form action="upload/" method="POST" >
        <div class="">
            <table style="width:350px;" >
			<col width="130">
			<col width="300">
            <tr><h2>Access Point Option</h2></tr> 
              <tr>
                <td class="list_input"><label for="ap_ssid"><b>SSID</b></label></td>
                <td><input type="text" value="" name="ap_ssid" required></td>
              
                 <td><label for="ap_ssid_hidden"></label></td>
                <td><input id="ap_ssid_hidden" type="checkbox" value="" name="ap_ssid_hidden">Hide SSID</td>
              </tr>
              <tr>
                <td class="list_input"><label for="ap_pswd"><b>Password</b></label></td>
                <td><input type="password" placeholder="" value="" name="ap_pswd" required pattern=".{0}|.{8,}"><br>
                  <input type="checkbox" onclick="apshowpass()">Show Password</td>
              </tr>
              <tr>
                <td class="list_input"><label for="ap_ip"><b>IP</b></label></td>
                <td><input type="text" value="" name="ap_ip" required></td>
              </tr>
          </table>
            
          <div id="sta_mode_only">
            <table style="width: 350px">
			<col width="130">
			<col width="300">
              <tr><h2>Station mode Option</h2></tr>
			  <tr>
			   <td class="list_input"><label><b>SSID Selection</b></label></td>
				<td>
                  <ul style=" padding-left: 0px; width=400pt">
                    <li selected="selected" style = "display:inline;">
                      <input id="scan_auto_on"  type="radio" value="on" name="sta_scan_mode" checked="checked" onclick="ShowHideDiv()">
                      <label for="sta_scan_mode"><b>Scan</b></label>
                    </li>
                    <li style = "display:inline; padding-left: 20px;">
                        <input id="scan_auto_off" type="radio" value="off" name="sta_scan_mode" onclick="ShowHideDiv()">
                        <label for="sta_scan_mode"><b>Manual</b></label>
                      </li>
                  </ul>
                </td>
				</tr>
              <tr>
              <td class="list_input"><label><b>SSID</b></label></td>
			  <td>
			    <input type="text" value="" id="dvtext" name="sta_ssid_man" >
				<select name="sta_ssid_scan" id="dvtext1" class="select_c">
				</select>
			  </td>
              </tr>

              <tr>
                <td class="list_input"><label for="sta_encryption"><b>Encryption</b></label></td>
                <td>
                  <select name="sta_encryption" class="select_c">
                    <option value="">WPA/WAP2</option>
                  </select>
                </td>
              </tr>

              <tr>
                <td class="list_input"><label for="sta_pswd"><b>Password</b></label></td>
                <td><input type="password" value="" name="sta_pswd"><br>
                  <input type="checkbox" onclick="stashowpass()">Show Password</td>
              </tr>
              
              <tr>
                <td class="list_input"><label for="sta_dhcp_mode"><b>DHCP</b></label></td>
                <td>
                  <ul style=" padding-left: 0px;">
                    <li selected="selected" style = "display:inline;">
                      <input id="sta_dhcp_mode_on"  type="radio" value="on" name="sta_dhcp_mode" checked="checked" onclick="sta_dhcp()">
                      <label for="sta_dhcp_mode"><b>ON</b></label>
                    </li>
                    <li style = "display:inline; padding-left: 20px;">
                        <input id="sta_dhcp_mode_off" type="radio" value="off" name="sta_dhcp_mode" onclick="sta_dhcp()">
                        <label for="sta_dhcp_mode"><b>OFF</b></label>
                      </li>
                  </ul>
                </td>
              </tr>
             
                <tr>
                  <td class="list_input"><label for="sta_static_ip"><b>Static IP</b></label></td>
                  <td><input type="text" value="" id="sta_static_ip" name="sta_static_ip" ></td>
                </tr>

                <tr>
                  <td class="list_input"><label for="sta_netmask"><b>Netmask</b></label></td>
                  <td><input type="text" value="" id="sta_static_netmask" name="sta_netmask" ></td>
                </tr>

                <tr>
                  <td class="list_input"><label for="sta_ip"><b>Gateway</b></label></td>
                  <td><input type="text" value="" id="sta_static_gateway" name="sta_gateway" ></td>
                </tr>

                <tr>
                  <td class="list_input"><label for="sta_ip"><b>Primary DNS</b></label></td>
                  <td><input type="text" value="" id="sta_static_dns1" name="sta_pri_dns" ></td>
                </tr>

                <tr>
                  <td class="list_input"><label for="sta_ip"><b>Secondary DNS</b></label></td>
                  <td><input type="text" value="" id="sta_static_dns2" name="sta_scnd_dns" ></td>
                </tr>
				
            </table> 
          </div>
          <div id="ntp_server">
            <table style="width: 350px">
              <tr><h2>NTP Server</h2></tr>

              <tr>
                <td class="list_input"><label for="ntp_addr"><b>Server Address</b></label></td>
                <td><input type="text" value="" name="ntp_addr" ></td>
              </tr>
              
            </table>
          </div>
        </div>
        <label for="end"></label><input type="text" name="end" value="end" style="display: none;">
        <button style="margin-left: 100px" class="admin-link" type="submit" onclick="myFunction()">Submit</button>
      </form>
    </div>
  </div>

  <script>

var configjs;
    const Http = new XMLHttpRequest();
    const url = 'config.json';
    Http.open("GET",url);
    Http.send();
    console.log("Hello01");

    Http.onreadystatechange=function(){
        if(this.readyState == 4 && this.status == 200){
            configjs = JSON.parse(Http.responseText);
            console.log(configjs);
            document.getElementsByName('ap_ssid')[0].value = configjs.ap_ssid;
            document.getElementById('ap_ssid_hidden').checked = configjs.ap_ssid_hidden;
            document.getElementsByName('ap_pswd')[0].value = configjs.ap_pswd;
            document.getElementsByName('ap_ip')[0].value = configjs.ap_ip;

			var select = document.getElementById('dvtext1');
			select.options[0]=new Option('Choose an AP','');
			select.options[1]=new Option(configjs.sta_ssid1,configjs.sta_ssid1);
			select.options[2]=new Option(configjs.sta_ssid2,configjs.sta_ssid2);
			select.options[3]=new Option(configjs.sta_ssid3,configjs.sta_ssid3);
			select.options[4]=new Option(configjs.sta_ssid4,configjs.sta_ssid4);
			select.options[5]=new Option(configjs.sta_ssid5,configjs.sta_ssid5);
   
            document.getElementsByName('sta_ssid_man')[0].value = configjs.sta_ssid;
            document.getElementsByName('sta_pswd')[0].value = configjs.sta_pswd;
            
            if(configjs.sta_dhcp_mode == true){
              document.getElementById('sta_dhcp_mode_on').checked = true;
              document.getElementById('sta_dhcp_mode_off').checked = false;
            }else{
              document.getElementById('sta_dhcp_mode_on').checked = false;
              document.getElementById('sta_dhcp_mode_off').checked = true;
            }

            document.getElementsByName('sta_static_ip')[0].value = configjs.sta_static_ip;
            document.getElementsByName('sta_netmask')[0].value = configjs.sta_netmask;
            document.getElementsByName('sta_gateway')[0].value = configjs.sta_gateway;
            document.getElementsByName('sta_pri_dns')[0].value = configjs.sta_pri_dns;
            document.getElementsByName('sta_scnd_dns')[0].value = configjs.sta_scnd_dns;
            document.getElementsByName('ntp_addr')[0].value = configjs.ntp_addr;
        }
    }
	
	function stashowpass(){
        var x = document.getElementsByName("sta_pswd")[0];
        if (x.type === "password") {
          x.type = "text";
        } else {
          x.type = "password";
        }
      }

    function apshowpass(){
        var x = document.getElementsByName("ap_pswd")[0];
        if (x.type === "password") {
          x.type = "text";
        } else {
          x.type = "password";
        }
      }

	function ShowHideDiv() {
        var chkManual = document.getElementById("scan_auto_off");
		var chkScan = document.getElementById("scan_auto_on");
        var dvtext = document.getElementById("dvtext");
        dvtext.style.display = chkManual.checked ? "block" : "none";
		var dvtext1 = document.getElementById("dvtext1");
        dvtext1.style.display = chkScan.checked ? "block" : "none";
    }

	function sta_dhcp() {
		var dhcpon = document.getElementById("sta_dhcp_mode_on");
		var dhcpoff = document.getElementById("sta_dhcp_mode_off");
		var ip = document.getElementById("sta_static_ip");
		var nm = document.getElementById("sta_static_netmask");
		var gw = document.getElementById("sta_static_gateway");
		var dns1 = document.getElementById("sta_static_dns1");
		var dns2 = document.getElementById("sta_static_dns2");
		if (dhcpon.checked) {
			ip.disabled = true;
			nm.disabled = true;
			gw.disabled = true;
			dns1.disabled = true;
			dns2.disabled = true;
		}
		if (dhcpoff.checked) {
			ip.disabled = false;
			nm.disabled = false;
			gw.disabled = false;
			dns1.disabled = false;
			dns2.disabled = false;
		}
	}
  </script>
</body>
</html>
